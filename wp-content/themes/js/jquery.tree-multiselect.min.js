!function e(t,i,s){function n(a,o){if(!i[a]){if(!t[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[a]={exports:{}};t[a][0].call(d.exports,function(e){var i=t[a][1][e];return n(i?i:e)},d,d.exports,e,t,i,s)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(e,t,i){"use strict";i.createLookup=function(e){return{arr:e,children:{}}},i.createSection=function(e){return{type:"section",name:e,items:[]}},i.isSection=function(e){return e&&"section"===e.type},i.getSectionName=function(e){return e.name},i.getSectionItems=function(e){return e.items},i.createItem=function(e,t,i,s,n,r){return{type:"item",id:e,value:t,text:i,description:s,initialIndex:n,section:r}},i.isItem=function(e){return e&&"item"===e.type}},{}],2:[function(e,t){"use strict";function i(e){var t={allowBatchSelection:!0,collapsible:!0,enableSelectAll:!1,selectAllText:"Select All",unselectAllText:"Unselect All",freeze:!1,hideSidePanel:!1,onChange:null,onlyBatchSelection:!1,searchable:!1,searchParams:["value","text","description","section"],sectionDelimiter:"/",showSectionOnSelected:!0,sortable:!1,startCollapsed:!1};return jQuery.extend({},t,e)}var s=e("./tree"),n=0,r=function(e){var t=this,r=i(e);return this.map(function(){var e=t;e.attr("multiple","").css("display","none");var i=new s(n,e,r);return i.initialize(),++n,{reload:function(){i.reload()},remove:function(){i.remove()}}})};t.exports=r},{"./tree":5}],3:[function(e,t){"use strict";function i(e,t,i,s){this.options=e,this.index={},this.selectionNodeHash=t,this.selectionNodeHashKeys=Object.keys(t),this.sectionNodeHash=i,this.sectionNodeHashKeys=Object.keys(i),this.setSearchParams(s),this.buildIndex()}function s(e){if(n.assert(e),e.length<r)return[e];for(var t=[],i=0;i<e.length-r+1;++i)t.push(e.substring(i,i+r));return t}var n=e("./utility"),r=3;i.prototype.setSearchParams=function(e){n.assert(Array.isArray(e));var t={value:!0,text:!0,description:!0,section:!0};this.searchParams=[];for(var i=0;i<e.length;++i)t[e[i]]&&this.searchParams.push(e[i])},i.prototype.buildIndex=function(){var e=this;this.options.forEach(function(t){var i=[];e.searchParams.forEach(function(e){i.push(t[e])}),n.array.removeFalseyExceptZero(i);var s=i.map(function(e){return e.toLowerCase()});s.forEach(function(i){var s=i.split(" ");s.forEach(function(i){e._addToIndex(i,t.id)})})})},i.prototype._addToIndex=function(e,t){for(var i=1;r>=i;++i)for(var s=0;s<e.length-i+1;++s){var n=e.substring(s,s+i);this.index[n]||(this.index[n]=[]);var a=this.index[n].length;(0===a||this.index[n][a-1]!==t)&&this.index[n].push(t)}},i.prototype.search=function(e){var t=this;if(!e)return this.selectionNodeHashKeys.forEach(function(e){t.selectionNodeHash[e].style.display=""}),void this.sectionNodeHashKeys.forEach(function(e){t.sectionNodeHash[e].style.display="",t.sectionNodeHash[e].removeAttribute("searchhit")});e=e.toLowerCase();var i=e.split(" "),r=[];i.forEach(function(e){var i=s(e);i.forEach(function(e){r.push(t.index[e]||[])})});var a=n.array.intersectMany(r);this._handleNodeVisbilities(a)},i.prototype._handleNodeVisbilities=function(e){var t=this,i={},s={};e.forEach(function(e){i[e]=!0;var r=t.selectionNodeHash[e];for(r.style.display="",r=r.parentNode;!r.className.match(/tree-multiselect/);){if(r.className.match(/section/)){var a=n.getKey(r);if(n.assert(a||0===a),s[a])break;s[a]=!0,r.style.display="",r.setAttribute("searchhit",!0)}r=r.parentNode}}),this.selectionNodeHashKeys.forEach(function(e){i[e]||(t.selectionNodeHash[e].style.display="none")}),this.sectionNodeHashKeys.forEach(function(e){s[e]||(t.sectionNodeHash[e].style.display="none")})},t.exports=i},{"./utility":9}],4:[function(e){"use strict";!function(t){t.fn.treeMultiselect=e("./main")}(jQuery)},{"./main":2}],5:[function(e,t){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function s(e,t,i){this.id=e,this.$originalSelect=t,this.params=i,this.resetState()}var n=e("./ast"),r=e("./search"),a=e("./ui-builder"),o=e("./utility");s.prototype.initialize=function(){if(this.generateSelections(this.$selectionContainer[0]),this.popupDescriptionHover(),this.params.allowBatchSelection&&this.handleSectionCheckboxMarkings(),this.params.collapsible&&this.addCollapsibility(),this.params.searchable||this.params.enableSelectAll){var e=o.dom.createNode("div",{"class":"auxiliary"});this.$selectionContainer.prepend(e,this.$selectionContainer.firstChild),this.params.searchable&&this.createSearchBar(e),this.params.enableSelectAll&&this.createSelectAllButtons(e)}this.armRemoveSelectedOnClick(),this.updateSelectedAndOnChange(),this.render(!0),this.uiBuilder.attach()},s.prototype.remove=function(){this.uiBuilder.remove(),this.resetState()},s.prototype.reload=function(){this.remove(),this.initialize()},s.prototype.resetState=function(){this.uiBuilder=new a(this.$originalSelect,this.params.hideSidePanel),this.$treeContainer=this.uiBuilder.$treeContainer,this.$selectionContainer=this.uiBuilder.$selectionContainer,this.$selectedContainer=this.uiBuilder.$selectedContainer,this.selectOptions=[],this.selectNodes={},this.sectionNodes={},this.selectedNodes={},this.selectedKeys=[],this.keysToAdd=[],this.keysToRemove=[]},s.prototype.generateSelections=function(e){var t=this.$originalSelect.children("option"),i=this.createAst(t);this.generateHtml(i,e)},s.prototype.createAst=function(e){var t,i=[],s=n.createLookup(i),r=this,a=0,c=[];return e.each(function(){var e=this;e.setAttribute("data-key",a);var t=e.getAttribute("data-section"),i=e.value,o=e.text,l=e.getAttribute("data-description"),d=parseInt(e.getAttribute("data-index")),h=n.createItem(a,i,o,l,d,t);d?r.keysToAdd[d]=a:e.hasAttribute("selected")&&c.push(a),r.selectOptions[a]=h,++a;for(var u=s,p=t&&t.length>0?t.split(r.params.sectionDelimiter):[],f=0;f<p.length;++f){var v=p[f];if(u.children[v])u=u.children[v];else{var y=n.createSection(v);u.arr.push(y);var m=n.createLookup(y.items);u.children[v]=m,u=m}}u.arr.push(h)}),o.array.removeFalseyExceptZero(this.keysToAdd),(t=this.keysToAdd).push.apply(t,c),o.array.uniq(this.keysToAdd),i},s.prototype.generateHtml=function(e,t,i){i=i||0;for(var s=0,r=0;r<e.length;++r){var a=e[r];if(n.isSection(a)){var c=n.getSectionName(a),l=s+i,d=o.dom.createSection(c,l,this.params.onlyBatchSelection||this.params.allowBatchSelection,this.params.freeze);this.sectionNodes[l]=d,++s,t.appendChild(d),s+=this.generateHtml(n.getSectionItems(a),d,i+s)}else if(n.isItem(a)){var h=o.dom.createSelection(a,this.id,!this.params.onlyBatchSelection,this.params.freeze);this.selectNodes[a.id]=h,t.appendChild(h)}}return s},s.prototype.popupDescriptionHover=function(){this.$selectionContainer.on("mouseenter","div.item > span.description",function(){var e=jQuery(this).parent(),t=e.attr("data-description"),i=document.createElement("div");i.className="temp-description-popup",i.innerHTML=t,i.style.position="absolute",e.append(i)}),this.$selectionContainer.on("mouseleave","div.item > span.description",function(){var e=jQuery(this).parent();e.find("div.temp-description-popup").remove()})},s.prototype.handleSectionCheckboxMarkings=function(){var e=this;this.$selectionContainer.on("click","input.section[type=checkbox]",function(){var t=jQuery(this).closest("div.section "),i=t.find("div.item"),s=[];if(i.each(function(e,t){s.push(o.getKey(t))}),this.checked){var n;(n=e.keysToAdd).push.apply(n,s),o.array.uniq(e.keysToAdd)}else{var r;(r=e.keysToRemove).push.apply(r,s),o.array.uniq(e.keysToRemove)}e.render()})},s.prototype.redrawSectionCheckboxes=function(e){e=e||this.$selectionContainer;var t=3,i=this,s=e.find("> div.section");if(s.each(function(){var e=i.redrawSectionCheckboxes(jQuery(this));t&=e}),t)for(var n=e.find("> div.item > input[type=checkbox]"),r=0;r<n.length&&(t&=n[r].checked?-3:-2,0!==t);++r);var a=e.find("> div.title > input[type=checkbox]");return a.length&&(a=a[0],1&t?(a.checked=!0,a.indeterminate=!1,$(a).removeClass("indeterminate")):2&t?(a.checked=!1,a.indeterminate=!1,$(a).removeClass("indeterminate")):(a.checked=!1,a.indeterminate=!0,$(a).addClass("indeterminate"))),t},s.prototype.addCollapsibility=function(){var e="div.title",t=this.$selectionContainer.find(e),i=o.dom.createNode("span",{"class":"collapse-section"});t.prepend(i);var s="div.section",n=this.$selectionContainer.find(s);this.params.startCollapsed&&n.addClass("collapsed"),this.$selectionContainer.on("click",e,function(e){if("INPUT"!==e.target.nodeName){var t=jQuery(this).parent();t.toggleClass("collapsed"),e.stopPropagation()}})},s.prototype.createSearchBar=function(e){var t=new r(this.selectOptions,this.selectNodes,this.sectionNodes,this.params.searchParams),i=o.dom.createNode("input",{"class":"search",placeholder:"Search a court..."});e.appendChild(i),this.$selectionContainer.on("input","input.search",function(){var e=this.value;t.search(e)})},s.prototype.createSelectAllButtons=function(e){var t=o.dom.createNode("span",{"class":"select-all",text:this.params.selectAllText}),s=o.dom.createNode("span",{"class":"unselect-all",text:this.params.unselectAllText}),n=o.dom.createNode("div",{"class":"select-all-container"});n.appendChild(t),n.appendChild(s),e.appendChild(n);var r=this;this.$selectionContainer.on("click","span.select-all",function(){for(var e=0;e<r.selectOptions.length;++e)r.keysToAdd.push(e);o.array.uniq(r.keysToAdd),r.render()}),this.$selectionContainer.on("click","span.unselect-all",function(){var e;(e=r.keysToRemove).push.apply(e,i(r.selectedKeys)),o.array.uniq(r.keysToRemove),r.render()})},s.prototype.armRemoveSelectedOnClick=function(){var e=this;this.$selectedContainer.on("click","span.remove-selected",function(){var t=this.parentNode,i=o.getKey(t);e.keysToRemove.push(i),e.render()})},s.prototype.updateSelectedAndOnChange=function(){var e=this;if(this.$selectionContainer.on("click","input.option[type=checkbox]",function(){var t=this,i=t.parentNode,s=o.getKey(i);o.assert(s||0===s),t.checked?e.keysToAdd.push(s):e.keysToRemove.push(s),e.render()}),this.params.sortable&&!this.params.freeze){var t=null,i=null;this.$selectedContainer.sortable({start:function(e,i){t=i.item.index()},stop:function(s,n){i=n.item.index(),t!==i&&(o.array.moveEl(e.selectedKeys,t,i),e.render())}})}},s.prototype.render=function(e){var t,s=this;o.array.subtract(this.keysToAdd,this.selectedKeys),o.array.intersect(this.keysToRemove,this.selectedKeys);for(var n=0;n<this.keysToRemove.length;++n){var r=this.selectedNodes[this.keysToRemove[n]];r&&(r.parentNode.removeChild(r),this.selectedNodes[this.keysToRemove[n]]=null);var a=this.selectNodes[this.keysToRemove[n]];a.getElementsByTagName("INPUT")[0].checked=!1}o.array.subtract(this.selectedKeys,this.keysToRemove);for(var c=0;c<this.keysToAdd.length;++c){var l=this.keysToAdd[c],d=this.selectOptions[l];this.selectedKeys.push(l);var h=o.dom.createSelected(d,this.params.freeze,this.params.showSectionOnSelected);this.selectedNodes[d.id]=h,this.$selectedContainer.append(h),this.selectNodes[this.keysToAdd[c]].getElementsByTagName("INPUT")[0].checked=!0}(t=this.selectedKeys).push.apply(t,i(this.keysToAdd)),o.array.uniq(this.selectedKeys),this.redrawSectionCheckboxes();for(var u={},p={},f=0;f<this.selectedKeys.length;++f){var v=this.selectOptions[this.selectedKeys[f]].value;u[this.selectedKeys[f]]=!0,p[v]=f}var y=this.$originalSelect.find("option").toArray();if(y.sort(function(e,t){var i=p[e.value]||0,s=p[t.value]||0;return i-s}),this.$originalSelect.html(y),this.$originalSelect.find("option").each(function(e,t){this.selected=!!u[o.getKey(t)]}),this.$originalSelect.change(),!e&&this.params.onChange){var m=this.selectedKeys.map(function(e){return s.selectOptions[e]}),k=this.keysToAdd.map(function(e){return s.selectOptions[e]}),g=this.keysToRemove.map(function(e){return s.selectOptions[e]});this.params.onChange(m,k,g)}this.keysToRemove=[],this.keysToAdd=[]},t.exports=s},{"./ast":1,"./search":3,"./ui-builder":6,"./utility":9}],6:[function(e,t){"use strict";function i(e,t){var i=jQuery('<div class="tree-multiselect"></div>'),s=jQuery('<div class="selections"></div>');t&&s.addClass("no-border"),i.append(s);var n=jQuery('<div class="selected"></div>');t||i.append(n),this.$el=e,this.$treeContainer=i,this.$selectionContainer=s,this.$selectedContainer=n}i.prototype.attach=function(){this.$el.after(this.$treeContainer)},i.prototype.remove=function(){this.$treeContainer.remove()},t.exports=i},{}],7:[function(e,t,i){"use strict";function s(e,t){for(var i=0,s=0;s<e.length;++s)t(e[s])&&(e[i]=e[s],++i);e.length=i}i.uniq=function(e){var t={},i=function(e){var i=!t[e];return t[e]=!0,i};s(e,i)},i.removeFalseyExceptZero=function(e){var t=function(e){return e||0===e};s(e,t)},i.moveEl=function(e,t,i){var s=e[t];e.splice(t,1),e.splice(i,0,s)},i.subtract=function(e,t){for(var i={},n=0;n<t.length;++n)i[t[n]]=!0;var r=function(e){return!i[e]};s(e,r)},i.intersect=function(e,t){for(var i={},n=0;n<t.length;++n)i[t[n]]=!0;var r=function(e){return i[e]};s(e,r)},i.intersectMany=function(e){var t=[],i=[];e.forEach(function(e){t.push(0),i.push(e.length-1)});for(var s=[];t.length>0&&t[0]<=i[0];++t[0]){for(var n=!1,r=1;r<e.length;++r){for(;e[r][t[r]]<e[0][t[0]]&&t[r]<=i[r];)++t[r];if(t[r]>i[r]){n=!0;break}}if(n)break;for(var a=!0,o=1;o<e.length;++o)if(e[0][t[0]]!==e[o][t[o]]){a=!1;break}a&&s.push(e[0][t[0]])}return s}},{}],8:[function(e,t,i){"use strict";i.createNode=function(e,t){var i=document.createElement(e);if(t){for(var s in t)t.hasOwnProperty(s)&&"text"!==s&&i.setAttribute(s,t[s]);t.text&&(i.textContent=t.text)}return i},i.createSelection=function(e,t,s,n){var r={"class":"item","data-key":e.id,"data-value":e.value},a=!!e.description;a&&(r["data-description"]=e.description),e.initialIndex&&(r["data-index"]=e.initialIndex);var o=i.createNode("div",r);if(a){var c=i.createNode("span",{"class":"description",text:"?"});o.appendChild(c)}if(s){var l="treemultiselect-"+t+"-"+e.id,d={"class":"option",type:"checkbox",id:l};n&&(d.disabled=!0);var h=i.createNode("input",d);o.insertBefore(h,o.firstChild);var u={"for":l,text:e.text||e.value},p=i.createNode("label",u);o.appendChild(p)}else o.innerText=e.text||e.value;return o},i.createSelected=function(e,t,s){var n=i.createNode("div",{"class":"item","data-key":e.id,"data-value":e.value,text:e.text});if(!t){var r=i.createNode("span",{"class":"remove-selected",text:"Ã—"});n.insertBefore(r,n.firstChild)}if(s){var a=i.createNode("span",{"class":"section-name",text:e.section});n.appendChild(a)}return n},i.createSection=function(e,t,s,n){var r=i.createNode("div",{"class":"section","data-key":t}),a=i.createNode("div",{"class":"title",text:e});if(s){var o={"class":"section",type:"checkbox"};n&&(o.disabled=!0);var c=i.createNode("input",o);a.insertBefore(c,a.firstChild)}return r.appendChild(a),r}},{}],9:[function(e,t,i){"use strict";i.array=e("./array"),i.assert=function(e,t){if(!e)throw new Error(t||"Assertion failed")},i.dom=e("./dom"),i.getKey=function(e){return i.assert(e),parseInt(e.getAttribute("data-key"))}},{"./array":7,"./dom":8}]},{},[4]);